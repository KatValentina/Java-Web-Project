<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${action == 'edit'} ? 'Редактировать автора' : 'Добавить автора'">Форма автора</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<div class="container">

    <header>
        <h1 th:text="${action == 'edit'} ? 'Редактировать автора' : 'Добавить нового автора'">Форма автора</h1>
        <p class="subtitle">Заполните информацию об авторе</p>
    </header>

    <div class="form-container">

        <form th:action="${action == 'edit'}
                        ? @{/authors/update/{id}(id=${author.id})}
                        : @{/authors}"
              th:object="${author}"
              method="post"
              class="author-form">

            <!-- Имя автора -->
            <div class="form-group">
                <label for="name">Имя автора <span class="required">*</span></label>
                <input type="text"
                       id="name"
                       th:field="*{name}"
                       placeholder="Например: Лев Толстой"
                       th:classappend="${#fields.hasErrors('name')} ? 'error' : ''"
                       minlength="4"
                       maxlength="150"
                       required>
                <span class="error-message"
                      th:if="${#fields.hasErrors('name')}"
                      th:errors="*{name}"></span>
            </div>

            <!-- Дата рождения -->
            <div class="form-group">
                <label for="birthDate">Дата рождения</label>
                <input type="date"
                       id="birthDate"
                       th:field="*{birthDate}"
                       th:classappend="${#fields.hasErrors('birthDate')} ? 'error' : ''">
                <span class="error-message"
                      th:if="${#fields.hasErrors('birthDate')}"
                      th:errors="*{birthDate}"></span>
            </div>

            <!-- Национальность -->
            <div class="form-group">
                <label for="nationality">Национальность</label>
                <textarea id="nationality"
                          th:field="*{nationality}"
                          placeholder="Например: Русский"
                          th:classappend="${#fields.hasErrors('nationality')} ? 'error' : ''"
                          maxlength="150"
                          rows="3"></textarea>
                <span class="error-message"
                      th:if="${#fields.hasErrors('nationality')}"
                      th:errors="*{nationality}"></span>
                <small class="form-help">Максимум 150 символов</small>
            </div>

            <!-- Биография -->
            <div class="form-group">
                <label for="biography">Биография</label>
                <textarea id="biography"
                          th:field="*{biography}"
                          placeholder="Краткая биография автора"
                          th:classappend="${#fields.hasErrors('biography')} ? 'error' : ''"
                          maxlength="500"
                          rows="5"></textarea>
                <span class="error-message"
                      th:if="${#fields.hasErrors('biography')}"
                      th:errors="*{biography}"></span>
                <small class="form-help">Максимум 500 символов</small>
            </div>

            <!-- Кнопки -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large">
                    <span th:text="${action == 'edit'} ? 'Сохранить изменения' : 'Добавить автора'"></span>
                </button>

                <a th:href="@{/authors}" class="btn btn-secondary btn-large">Отмена</a>
            </div>

            <p class="form-note"><span class="required">*</span> Обязательные поля</p>

        </form>
    </div>
</div>
</body>
</html>
