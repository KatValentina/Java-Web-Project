<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${action == 'edit'} ? 'Редактировать произведение' : 'Добавить произведение'">Форма автора</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<div class="container">

    <header>
        <h1 th:text="${action == 'edit'} ? 'Редактировать произведение' : 'Добавить новое произведение'">Форма автора</h1>
        <p class="subtitle">Заполните информацию об произведении</p>
    </header>

    <div class="form-container">

        <form th:action="${action == 'edit'}
                        ? @{/oeuvres/update/{id}(id=${oeuvre.id})}
                        : @{/oeuvres}"
              th:object="${oeuvre}"
              method="post"
              class="oeuvre-form">

            <!--Название произведения -->
            <div class="form-group">
                <label for="title">Название <span class="required">*</span></label>
                <input type="text"
                       id="title"
                       th:field="*{title}"
                       placeholder="Например: Война и мир"
                       th:classappend="${#fields.hasErrors('title')} ? 'error' : ''"
                       maxlength="5000"
                       required>
                <span class="error-message"
                      th:if="${#fields.hasErrors('title')}"
                      th:errors="*{title}"></span>
            </div>

            <!--Название произведения -->
            <div class="form-group">
                <label for="genre">Название <span class="required">*</span></label>
                <input type="genre"
                       id="genre"
                       th:field="*{genre}"
                       placeholder="Например: роман-эпопея"
                       th:classappend="${#fields.hasErrors('genre')} ? 'error' : ''"
                       maxlength="5000"
                       required>
                <span class="error-message"
                      th:if="${#fields.hasErrors('genre')}"
                      th:errors="*{genre}"></span>
            </div>

            <div>
                <label for="published_year">Год опубликования</label>
                <textarea id="published_year"
                          th:field="*{published_year}"
                          placeholder="Например: 1868"
                          th:classappend="${#fields.hasErrors('published_year')} ? 'error' : ''"
                          min="1454"
                          max="2026"
                          required>
                    <span class="error-message"
                      th:if="${#fields.hasErrors('published_year')}"
                      th:errors="*{published_year}"></span>
            </div>

            <!-- Национальность -->
            <div class="form-group">
                <label for="nationality">Национальность</label>
                <textarea id="nationality"
                          th:field="*{nationality}"
                          placeholder="Например: Русский"
                          th:classappend="${#fields.hasErrors('nationality')} ? 'error' : ''"
                          maxlength="150"
                          rows="3"></textarea>
                <span class="error-message"
                      th:if="${#fields.hasErrors('nationality')}"
                      th:errors="*{nationality}"></span>
                <small class="form-help">Максимум 150 символов</small>
            </div>

            <!-- Биография -->
            <div class="form-group">
                <label for="biography">Биография</label>
                <textarea id="biography"
                          th:field="*{biography}"
                          placeholder="Краткая биография автора"
                          th:classappend="${#fields.hasErrors('biography')} ? 'error' : ''"
                          maxlength="500"
                          rows="5"></textarea>
                <span class="error-message"
                      th:if="${#fields.hasErrors('biography')}"
                      th:errors="*{biography}"></span>
                <small class="form-help">Максимум 500 символов</small>
            </div>

            <!-- Кнопки -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large">
                    <span th:text="${action == 'edit'} ? 'Сохранить изменения' : 'Добавить автора'"></span>
                </button>

                <a th:href="@{/authors}" class="btn btn-secondary btn-large">Отмена</a>
            </div>

            <p class="form-note"><span class="required">*</span> Обязательные поля</p>

        </form>
    </div>
</div>
</body>
</html>
