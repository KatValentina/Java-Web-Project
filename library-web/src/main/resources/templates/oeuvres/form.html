<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${action == 'edit'} ? 'Редактировать произведение' : 'Добавить произведение'">Форма автора</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<div class="container">

    <header>
        <h1 th:text="${action == 'edit'} ? 'Редактировать произведение' : 'Добавить новое произведение'">Форма автора</h1>
        <p class="subtitle">Заполните информацию об произведении</p>
    </header>

    <div class="form-container">

        <form th:action="${action == 'edit'}
                        ? @{/oeuvres/update/{id}(id=${oeuvre.id})}
                        : @{/oeuvres}"
              th:object="${oeuvre}"
              method="post"
              class="oeuvre-form">

            <!--автор -->
            <div class="form-group">
                <label for="author">Автор <span class="required">*</span></label>
                <select id="author" th:field="*{author.id}" required>
                    <option value="">-- Выберите автора --</option>
                    <option th:each="a : ${authors}"
                            th:value="${a.id}"
                            th:text="${a.name}">
                    </option>
                </select>
            </div>

            <!--Название произведения -->
            <div class="form-group">
                <label for="title">Название <span class="required">*</span></label>
                <input type="text"
                       id="title"
                       th:field="*{title}"
                       placeholder="Например: Война и мир"
                       th:classappend="${#fields.hasErrors('title')} ? 'error' : ''"
                       maxlength="5000"
                       required>
                <span class="error-message"
                      th:if="${#fields.hasErrors('title')}"
                      th:errors="*{title}"></span>
            </div>

            <!--Жанр произведения -->
            <div class="form-group">
                <label for="genre">Жанр<span class="required">*</span></label>
                <input type="text"
                       id="genre"
                       th:field="*{genre}"
                       placeholder="Например: роман-эпопея"
                       th:classappend="${#fields.hasErrors('genre')} ? 'error' : ''"
                       maxlength="5000"
                       required>
                <span class="error-message"
                      th:if="${#fields.hasErrors('genre')}"
                      th:errors="*{genre}"></span>
            </div>

            <!--год опубликования-->
            <div class="form-group">
                <label for="publishedYear">Год выпуска <span class="required">*</span></label>
                <input type="number"
                       id="publishedYear"
                       th:field="*{publishedYear}"
                       placeholder="Например: 2020"
                       th:classappend="${#fields.hasErrors('publishedYear')} ? 'error' : ''"
                       min="1454"
                       max="2026"
                       required>
                <span class="error-message" th:if="${#fields.hasErrors('publishedYear')}" th:errors="*{publishedYear}"></span>
            </div>

            <!-- Кнопки -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large">
                    <span th:text="${action == 'edit'} ? 'Сохранить изменения' : 'Добавить произведение'"></span>
                </button>

                <a th:href="@{/oeuvres}" class="btn btn-secondary btn-large">Отмена</a>
            </div>

            <p class="form-note"><span class="required">*</span> Обязательные поля</p>

        </form>
    </div>
</div>
</body>
</html>
